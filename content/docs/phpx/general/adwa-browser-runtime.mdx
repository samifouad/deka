---
title: "Adwa Browser Runtime"
description: "Run PHPX in-browser with host capability gating tuned for the adwa runtime."
section: "phpx"
category: "general"
categoryLabel: "Language"
categoryOrder: 8
version: "latest"
---

PHPX supports host-targeted diagnostics and runtime gating for browser execution through `adwa`.

## Host targets

- `server` (default): full runtime capabilities
- `adwa`: browser-safe profile with selected capabilities disabled

Set the target in editor/LSP initialization:

```json
{
  "phpx": {
    "target": "adwa"
  }
}
```

## Capability model

In `adwa`, these capabilities are currently blocked:

- database modules (`db/*`, `postgres`, `mysql`, `sqlite`)
- process/env access (`process`, `env`)
- direct network bridge calls (`net`, `tcp`, `tls`) unless explicitly re-enabled by host policy

When blocked APIs are imported, LSP reports a `Target Capability Error` with an actionable help message.

## Runtime smoke workflow

Build and validate the PHP runtime wasm artifact:

```sh
scripts/test-adwa-php-runtime.sh
```

This script:

1. builds `php-rs` for `wasm32-unknown-unknown` in `release`
2. verifies the wasm artifact exists
3. runs host-profile gating tests
4. runs focused PHPX smoke cases (basic eval/imports/jsx/fs)

Run the host-adapter bridge smoke checks:

```sh
scripts/test-adwa-host-bridge.sh
```

This verifies:

- capability denial behavior for blocked kinds (for example `db` in `adwa`)
- fs action mapping (`readFile`, `writeFile`, `readdir`, `stat`) through the host adapter

Run module graph smoke checks (`@/` alias, `php_modules`, cache fallback):

```sh
scripts/test-adwa-module-graph.sh
```

Run browser e2e for the playground (`edit -> run -> output update`):

```sh
scripts/test-adwa-playground-e2e.sh
```

## Playground workflow

Build and serve the browser playground:

```sh
scripts/run-adwa-playground.sh
```

Build only:

```sh
scripts/run-adwa-playground.sh --build-only
```

## Migration notes from server-only assumptions

- keep database work on server endpoints and call from browser-safe modules
- avoid process/env reads in browser-targeted code; inject config through context
- keep shared domain logic in pure PHPX modules so both targets can reuse them
