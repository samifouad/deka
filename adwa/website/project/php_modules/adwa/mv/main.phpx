import { cmd_args, cmd_resolve_path, fs_call, fs_error } from '../lib.phpx'
import { option_is_some, option_unwrap } from 'core/option'
import { stdout } from 'io'

$args = cmd_args()
if (count($args) < 2) {
    stdout("mv: source and destination required\n")
    return
}
$from = cmd_resolve_path($args[0])
$to = cmd_resolve_path($args[1])
$raw = fs_call('rename', { path: $from, to: $to })
$err = fs_error($raw)
if (option_is_some($err)) {
    stdout("mv: " . option_unwrap($err) . "\n")
}
