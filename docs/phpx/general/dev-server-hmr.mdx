---
title: "Dev Server and HMR"
description: "How PHPX dev mode updates changed UI without a full page reload."
section: "phpx"
category: "general"
categoryLabel: "Language"
categoryOrder: 1
---

PHPX dev mode supports HMR for frontmatter/JSX templates so you can iterate without losing browser state.

## Start dev server

```bash
deka serve --dev
```

You can also run your project script if wired through `deka.json`.

Prefer `deka task dev` with a `tasks` entry in `deka.json`:

```json
{
  "tasks": {
    "dev": "deka serve --dev"
  }
}
```

Then run:

```bash
deka task dev
```

Note: tasks run in the CLI shell and are not subject to runtime permission gates.

## What HMR updates

- template markup updates
- class/style changes in rendered output
- component output changes

Behavior target:

- update changed subtree in-place
- preserve input/focus/scroll where possible
- avoid full hard reload for template-only edits

## Minimal example

`app/page.phpx`

```phpx
---
interface CounterProps {
  $label: string
}

function Counter({ $label }: CounterProps) {
  return <div class="p-4 border rounded">
    <label>{$label}</label>
    <input id="name" class="border px-2 ml-2" />
  </div>
}
---
<Counter label="Name" />
```

If you change `"Name"` to `"Display Name"` while dev server runs, the rendered label updates without wiping the input value.

## Troubleshooting

If you see full-page reloads instead of HMR:

1. ensure server was started with `--dev`
2. confirm `<Hydration />` exists where client nav/runtime is needed
3. check websocket endpoint health (`/_deka/hmr`)
4. hard refresh once after bundler/runtime changes
