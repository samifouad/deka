---
title: /contratos
description: Desplegar y gestionar contratos inteligentes
---
Despliega y gestiona contratos inteligentes de TypeScript en la blockchain de Tana. Los contratos se ejecutan en un entorno V8 aislado.

<details>
 <summary><code className="text-green-400">POST</code> <code><b>/contracts/deploy</b></code> <code>(desplegar contrato)</code></summary>

### Solicitud

```bash
curl -X POST http://localhost:8080/contracts/deploy \
  -H "Content-Type: application/json" \
  -d '{
    "ownerId": "usr_abc123",
    "name": "token-transfer",
    "sourceCode": "import { console } from \"tana:core\"; ...",
    "description": "Simple token transfer contract",
    "metadata": {
      "version": "1.0.0",
      "author": "@alice"
    }
  }'
```

### Parámetros

<table>
 <tr>
    <td>_parámetro_</td>
    <td>_tipo_</td>
    <td>_necesidad_</td>
  </tr>
 <tr>
    <td>**ownerId**</td>
    <td>cadena (UUID)</td>
    <td>requerido</td>
  </tr>
 <tr>
    <td>**name**</td>
    <td>cadena</td>
    <td>requerido</td>
  </tr>
 <tr>
    <td>**sourceCode**</td>
    <td>cadena (TypeScript)</td>
    <td>requerido</td>
  </tr>
 <tr>
    <td>**description**</td>
    <td>cadena</td>
    <td>opcional</td>
  </tr>
 <tr>
    <td>**metadata**</td>
    <td>objeto</td>
    <td>opcional</td>
  </tr>
</table>

### Respuesta

<table>
 <tr>
    <td>código http</td>
    <td>tipo de contenido</td>
    <td>cuerpo</td>
  </tr>
  <tr>
    <td>201</td>
    <td>application/json</td>
<td>

```json
{
  "id": "cnt_xyz789",
  "ownerId": "usr_abc123",
  "name": "token-transfer",
  "sourceCode": "import { console } from \"tana:core\"; ...",
  "description": "Simple token transfer contract",
  "metadata": {
    "version": "1.0.0",
    "author": "@alice"
  },
  "status": "active",
  "createdAt": "2024-11-08T12:00:00.000Z"
}
```

</td>
  </tr>
  <tr>
    <td>400</td>
    <td>application/json</td>
<td>

```json
{
  "error": "Missing required fields: ownerId, name, sourceCode"
}
```

</td>
  </tr>
</table>

### Nivel de Acceso

- [x] Público
- [ ] Comunidad
- [ ] Equipo
- [ ] Propio
- [ ] Admin

</details>

<details>
 <summary><code className="text-blue-400">GET</code> <code><b>/contracts</b></code> <code>(listar contratos)</code></summary>

### Solicitud

```bash
# List all contracts
curl "http://localhost:8080/contracts?limit=50&offset=0"

# List only active contracts
curl "http://localhost:8080/contracts?active=true&limit=50&offset=0"
```

### Parámetros

<table>
 <tr>
    <td>_parámetro_</td>
    <td>_tipo_</td>
    <td>_necesidad_</td>
  </tr>
 <tr>
    <td>**limit**</td>
    <td>número</td>
    <td>opcional (por defecto: 50)</td>
  </tr>
 <tr>
    <td>**offset**</td>
    <td>número</td>
    <td>opcional (por defecto: 0)</td>
  </tr>
 <tr>
    <td>**active**</td>
    <td>booleano</td>
    <td>opcional</td>
  </tr>
</table>

### Respuesta

<table>
 <tr>
    <td>código http</td>
    <td>tipo de contenido</td>
    <td>cuerpo</td>
  </tr>
  <tr>
    <td>200</td>
    <td>application/json</td>
<td>

```json
[
  {
    "id": "cnt_xyz789",
    "ownerId": "usr_abc123",
    "name": "token-transfer",
    "description": "Simple token transfer contract",
    "status": "active",
    "createdAt": "2024-11-08T12:00:00.000Z",
    "updatedAt": "2024-11-08T12:00:00.000Z"
  },
  {
    "id": "cnt_abc123",
    "ownerId": "usr_def456",
    "name": "voting-system",
    "description": "Decentralized voting contract",
    "status": "active",
    "createdAt": "2024-11-07T10:00:00.000Z",
    "updatedAt": "2024-11-07T10:00:00.000Z"
  }
]
```

</td>
  </tr>
</table>

### Nivel de Acceso

- [x] Público
- [ ] Comunidad
- [ ] Equipo
- [ ] Propio
- [ ] Admin

</details>

<details>
 <summary><code className="text-blue-400">GET</code> <code><b>/contracts/:id</b></code> <code>(obtener contrato por ID)</code></summary>

### Solicitud

```bash
curl http://localhost:8080/contracts/cnt_xyz789
```

### Parámetros

<table>
 <tr>
    <td>_parámetro_</td>
    <td>_tipo_</td>
    <td>_necesidad_</td>
  </tr>
 <tr>
    <td>**id**</td>
    <td>cadena</td>
    <td>requerido (parámetro de URL)</td>
  </tr>
</table>

### Respuesta

<table>
 <tr>
    <td>código http</td>
    <td>tipo de contenido</td>
    <td>cuerpo</td>
  </tr>
  <tr>
    <td>200</td>
    <td>application/json</td>
<td>

```json
{
  "id": "cnt_xyz789",
  "ownerId": "usr_abc123",
  "name": "token-transfer",
  "sourceCode": "import { console } from \"tana:core\"; ...",
  "description": "Simple token transfer contract",
  "metadata": {
    "version": "1.0.0",
    "author": "@alice"
  },
  "status": "active",
  "createdAt": "2024-11-08T12:00:00.000Z",
  "updatedAt": "2024-11-08T12:00:00.000Z"
}
```

</td>
  </tr>
  <tr>
    <td>404</td>
    <td>application/json</td>
<td>

```json
{
  "error": "Contract not found"
}
```

</td>
  </tr>
</table>

### Nivel de Acceso

- [x] Público
- [ ] Comunidad
- [ ] Equipo
- [ ] Propio
- [ ] Admin

</details>

<details>
 <summary><code className="text-blue-400">GET</code> <code><b>/contracts/owner/:ownerId</b></code> <code>(obtener contratos por propietario)</code></summary>

### Solicitud

```bash
curl "http://localhost:8080/contracts/owner/usr_abc123?limit=50&offset=0"
```

### Parámetros

<table>
 <tr>
    <td>_parámetro_</td>
    <td>_tipo_</td>
    <td>_necesidad_</td>
  </tr>
 <tr>
    <td>**ownerId**</td>
    <td>cadena</td>
    <td>requerido (parámetro de URL)</td>
  </tr>
 <tr>
    <td>**limit**</td>
    <td>número</td>
    <td>opcional (por defecto: 50)</td>
  </tr>
 <tr>
    <td>**offset**</td>
    <td>número</td>
    <td>opcional (por defecto: 0)</td>
  </tr>
</table>

### Respuesta

<table>
 <tr>
    <td>código http</td>
    <td>tipo de contenido</td>
    <td>cuerpo</td>
  </tr>
  <tr>
    <td>200</td>
    <td>application/json</td>
<td>

```json
[
  {
    "id": "cnt_xyz789",
    "ownerId": "usr_abc123",
    "name": "token-transfer",
    "description": "Simple token transfer contract",
    "status": "active",
    "createdAt": "2024-11-08T12:00:00.000Z",
    "updatedAt": "2024-11-08T12:00:00.000Z"
  }
]
```

</td>
  </tr>
</table>

### Nivel de Acceso

- [x] Público
- [ ] Comunidad
- [ ] Equipo
- [ ] Propio
- [ ] Admin

</details>

<details>
 <summary><code className="text-green-400">POST</code> <code><b>/contracts/:id/deactivate</b></code> <code>(desactivar contrato)</code></summary>

### Solicitud

```bash
curl -X POST http://localhost:8080/contracts/cnt_xyz789/deactivate \
  -H "Content-Type: application/json" \
  -d '{
    "ownerId": "usr_abc123"
  }'
```

### Parámetros

<table>
 <tr>
    <td>_parámetro_</td>
    <td>_tipo_</td>
    <td>_necesidad_</td>
  </tr>
 <tr>
    <td>**id**</td>
    <td>cadena</td>
    <td>requerido (parámetro de URL)</td>
  </tr>
 <tr>
    <td>**ownerId**</td>
    <td>cadena (UUID)</td>
    <td>requerido</td>
  </tr>
</table>

### Respuesta

<table>
 <tr>
    <td>código http</td>
    <td>tipo de contenido</td>
    <td>cuerpo</td>
  </tr>
  <tr>
    <td>200</td>
    <td>application/json</td>
<td>

```json
{
  "id": "cnt_xyz789",
  "ownerId": "usr_abc123",
  "name": "token-transfer",
  "status": "inactive",
  "deactivatedAt": "2024-11-08T13:00:00.000Z"
}
```

</td>
  </tr>
  <tr>
    <td>400</td>
    <td>application/json</td>
<td>

```json
{
  "error": "Missing ownerId"
}
```

</td>
  </tr>
  <tr>
    <td>403</td>
    <td>application/json</td>
<td>

```json
{
  "error": "Only contract owner can deactivate"
}
```

</td>
  </tr>
</table>

### Nivel de Acceso

- [ ] Público
- [ ] Comunidad
- [ ] Equipo
- [x] Propio
- [ ] Admin

</details>

### Método No Permitido

Los siguientes métodos no son soportados:

<code className="text-orange-400">PUT</code> <code className="text-red-400">DELETE</code> <code className="text-purple-400">PATCH</code>
