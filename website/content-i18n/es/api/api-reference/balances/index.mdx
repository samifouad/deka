---
title: /balances
description: Gestionar saldos de cuentas y divisas
---
Gestiona saldos para usuarios y equipos en múltiples monedas. Todos los montos de saldo se almacenan como cadenas para preservar la precisión decimal.

<details>
 <summary><code className="text-blue-400">GET</code> <code><b>/balances</b></code> <code>(obtener todos los saldos o saldo específico)</code></summary>

### Solicitud

**Obtener todos los saldos:**
```bash
curl http://localhost:8080/balances
```

**Obtener saldo específico:**
```bash
curl "http://localhost:8080/balances?ownerId=usr_1a2b3c4d5e6f&ownerType=user&currencyCode=USD"
```

### Parámetros

<table>
 <tr>
    <td>_parámetro_</td>
    <td>_tipo_</td>
    <td>_necesidad_</td>
  </tr>
 <tr>
    <td>**ownerId**</td>
    <td>cadena (UUID)</td>
    <td>opcional (parámetro de consulta)</td>
  </tr>
 <tr>
    <td>**ownerType**</td>
    <td>cadena (usuario | equipo)</td>
    <td>opcional (parámetro de consulta)</td>
  </tr>
 <tr>
    <td>**currencyCode**</td>
    <td>cadena</td>
    <td>opcional (parámetro de consulta)</td>
  </tr>
</table>

**Nota:** Si se proporciona algún parámetro de consulta, los tres (ownerId, ownerType, currencyCode) son requeridos.

### Respuesta

**Todos los saldos (sin parámetros de consulta):**

<table>
 <tr>
    <td>código http</td>
    <td>tipo de contenido</td>
    <td>cuerpo</td>
  </tr>
  <tr>
    <td>200</td>
    <td>application/json</td>
<td>

```json
[
  {
    "ownerId": "usr_1a2b3c4d5e6f",
    "ownerType": "user",
    "currencyCode": "USD",
    "balance": "1000.50",
    "updatedAt": "2024-11-08T12:00:00.000Z"
  },
  {
    "ownerId": "usr_1a2b3c4d5e6f",
    "ownerType": "user",
    "currencyCode": "ETH",
    "balance": "2.5",
    "updatedAt": "2024-11-08T11:30:00.000Z"
  }
]
```

</td>
  </tr>
</table>

**Saldo específico (con parámetros de consulta):**

<table>
 <tr>
    <td>código http</td>
    <td>tipo de contenido</td>
    <td>cuerpo</td>
  </tr>
  <tr>
    <td>200</td>
    <td>application/json</td>
<td>

```json
{
  "ownerId": "usr_1a2b3c4d5e6f",
  "ownerType": "user",
  "currencyCode": "USD",
  "balance": "1000.50",
  "updatedAt": "2024-11-08T12:00:00.000Z"
}
```

</td>
  </tr>
  <tr>
    <td>400</td>
    <td>application/json</td>
<td>

```json
{
  "error": "Missing required query parameters: ownerId, ownerType, currencyCode"
}
```

</td>
  </tr>
</table>

**Si el saldo no existe:**

<table>
 <tr>
    <td>código http</td>
    <td>tipo de contenido</td>
    <td>cuerpo</td>
  </tr>
  <tr>
    <td>200</td>
    <td>application/json</td>
<td>

```json
{
  "balance": "0",
  "currencyCode": "USD"
}
```

</td>
  </tr>
</table>

### Nivel de Acceso

- [x] Público
- [ ] Comunidad
- [ ] Equipo
- [ ] Propio
- [ ] Admin

</details>

<details>
 <summary><code className="text-green-400">POST</code> <code><b>/balances</b></code> <code>(establecer saldo)</code></summary>

### Solicitud

```bash
curl -X POST http://localhost:8080/balances \
  -H "Content-Type: application/json" \
  -d '{
    "ownerId": "usr_1a2b3c4d5e6f",
    "ownerType": "user",
    "currencyCode": "USD",
    "amount": "1500.75"
  }'
```

### Parámetros

<table>
 <tr>
    <td>_parámetro_</td>
    <td>_tipo_</td>
    <td>_necesidad_</td>
  </tr>
 <tr>
    <td>**ownerId**</td>
    <td>cadena (UUID)</td>
    <td>requerido</td>
  </tr>
 <tr>
    <td>**ownerType**</td>
    <td>cadena (usuario | equipo)</td>
    <td>requerido</td>
  </tr>
 <tr>
    <td>**currencyCode**</td>
    <td>cadena</td>
    <td>requerido</td>
  </tr>
 <tr>
    <td>**amount**</td>
    <td>cadena (decimal)</td>
    <td>requerido</td>
  </tr>
</table>

### Respuesta

<table>
 <tr>
    <td>código http</td>
    <td>tipo de contenido</td>
    <td>cuerpo</td>
  </tr>
  <tr>
    <td>201</td>
    <td>application/json</td>
<td>

```json
{
  "ownerId": "usr_1a2b3c4d5e6f",
  "ownerType": "user",
  "currencyCode": "USD",
  "balance": "1500.75",
  "updatedAt": "2024-11-08T12:00:00.000Z"
}
```

</td>
  </tr>
  <tr>
    <td>400</td>
    <td>application/json</td>
<td>

```json
{
  "error": "Amount must be a valid decimal number"
}
```

</td>
  </tr>
</table>

### Nivel de Acceso

- [ ] Público
- [ ] Comunidad
- [ ] Equipo
- [ ] Propio
- [x] Admin

</details>

<details>
 <summary><code className="text-blue-400">GET</code> <code><b>/balances/currencies</b></code> <code>(listar todas las monedas)</code></summary>

### Solicitud

```bash
curl http://localhost:8080/balances/currencies
```

### Parámetros

Ninguno

### Respuesta

<table>
 <tr>
    <td>código http</td>
    <td>tipo de contenido</td>
    <td>cuerpo</td>
  </tr>
  <tr>
    <td>200</td>
    <td>application/json</td>
<td>

```json
[
  {
    "code": "USD",
    "type": "fiat",
    "decimals": 2,
    "name": "US Dollar",
    "symbol": "$",
    "verified": true
  },
  {
    "code": "ETH",
    "type": "crypto",
    "decimals": 18,
    "name": "Ethereum",
    "symbol": "Ξ",
    "verified": true
  }
]
```

</td>
  </tr>
</table>

### Nivel de Acceso

- [x] Público
- [ ] Comunidad
- [ ] Equipo
- [ ] Propio
- [ ] Admin

</details>

<details>
 <summary><code className="text-green-400">POST</code> <code><b>/balances/currencies</b></code> <code>(crear moneda)</code></summary>

### Solicitud

```bash
curl -X POST http://localhost:8080/balances/currencies \
  -H "Content-Type: application/json" \
  -d '{
    "code": "BTC",
    "type": "crypto",
    "decimals": 8,
    "name": "Bitcoin",
    "symbol": "₿",
    "verified": false
  }'
```

### Parámetros

<table>
 <tr>
    <td>_parámetro_</td>
    <td>_tipo_</td>
    <td>_necesidad_</td>
  </tr>
 <tr>
    <td>**code**</td>
    <td>cadena (mayúsculas)</td>
    <td>requerido</td>
  </tr>
 <tr>
    <td>**type**</td>
    <td>cadena (fiat | cripto)</td>
    <td>requerido</td>
  </tr>
 <tr>
    <td>**decimals**</td>
    <td>número (0-18)</td>
    <td>requerido</td>
  </tr>
 <tr>
    <td>**name**</td>
    <td>cadena</td>
    <td>opcional</td>
  </tr>
 <tr>
    <td>**symbol**</td>
    <td>cadena</td>
    <td>opcional</td>
  </tr>
 <tr>
    <td>**verified**</td>
    <td>booleano</td>
    <td>opcional</td>
  </tr>
</table>

### Respuesta

<table>
 <tr>
    <td>código http</td>
    <td>tipo de contenido</td>
    <td>cuerpo</td>
  </tr>
  <tr>
    <td>201</td>
    <td>application/json</td>
<td>

```json
{
  "code": "BTC",
  "type": "crypto",
  "decimals": 8,
  "name": "Bitcoin",
  "symbol": "₿",
  "verified": false,
  "createdAt": "2024-11-08T12:00:00.000Z"
}
```

</td>
  </tr>
  <tr>
    <td>400</td>
    <td>application/json</td>
<td>

```json
{
  "error": "Currency code already exists"
}
```

</td>
  </tr>
</table>

### Nivel de Acceso

- [ ] Público
- [ ] Comunidad
- [ ] Equipo
- [ ] Propio
- [x] Admin

</details>

<details>
 <summary><code className="text-green-400">POST</code> <code><b>/balances/currencies/seed</b></code> <code>(sembrar monedas predeterminadas)</code></summary>

### Solicitud

```bash
curl -X POST http://localhost:8080/balances/currencies/seed
```

### Parámetros

Ninguno

### Respuesta

<table>
 <tr>
    <td>código http</td>
    <td>tipo de contenido</td>
    <td>cuerpo</td>
  </tr>
  <tr>
    <td>200</td>
    <td>application/json</td>
<td>

```json
{
  "message": "Default currencies seeded"
}
```

</td>
  </tr>
  <tr>
    <td>400</td>
    <td>application/json</td>
<td>

```json
{
  "error": "Error seeding currencies"
}
```

</td>
  </tr>
</table>

### Nivel de Acceso

- [ ] Público
- [ ] Comunidad
- [ ] Equipo
- [ ] Propio
- [x] Admin

</details>

### Método No Permitido

Los siguientes métodos no son soportados:

<code className="text-orange-400">PUT</code> <code className="text-red-400">DELETE</code> <code className="text-purple-400">PATCH</code>
