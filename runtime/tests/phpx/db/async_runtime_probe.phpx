/*
TEST: async runtime probe; verifies await actually delays execution.
*/
import { sleep_async, now_ms } from 'time'

$start = now_ms()
$ok = await sleep_async(250)
$end = now_ms()

if (!$ok) {
  echo "ERR sleep\n"
  return
}

$elapsed = $end - $start
if ($elapsed < 200) {
  echo "ERR elapsed " . $elapsed . "\n"
  return
}

echo "OK elapsed " . $elapsed . "\n"
