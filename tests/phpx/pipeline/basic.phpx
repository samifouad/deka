/*
TEST: Pipeline operator
Covers: |>, function call injection, ... placeholder, method call, bare identifier, arrow function.
*/

function add($a, $b = 0) {
    return $a + $b;
}

function exclaim($s) {
    return $s . "!";
}

struct Person {
    $name: string;

    function greet($prefix) {
        return $prefix . " " . $this.name;
    }
}

$person = Person { $name: "Sami" };
$f = fn($v) => $v * 3;

echo (1 |> add(2)) . "\n";
echo ("hello" |> exclaim()) . "\n";
echo ("hey" |> exclaim(...)) . "\n";
echo ("hi" |> $person->greet()) . "\n";
echo (4 |> add) . "\n";
echo (3 |> $f()) . "\n";
