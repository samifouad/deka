/*
TEST: Nested async component rendering with Suspense
Covers: nested async subtree fallback and resolved async render output.
*/

import { jsx, jsxs, Suspense } from 'component/core'
import { renderToString, renderToStringAsync } from 'component/dom'

async function Leaf($props): Promise<mixed> {
  return <span>{$props.label}</span>
}

async function Box($props): Promise<mixed> {
  return <div><Leaf label={$props.label} /></div>
}

$sync = renderToString(
  <Suspense fallback={<em>Loading tree</em>}>
    <Box label="A" />
  </Suspense>
)
echo $sync . "\n"

$async = await renderToStringAsync(
  <Suspense fallback={<em>Loading tree</em>}>
    <Box label="A" />
  </Suspense>
)
echo $async . "\n"
